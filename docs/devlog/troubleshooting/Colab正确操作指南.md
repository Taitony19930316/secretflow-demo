# 📚 Google Colab 正确操作指南

## ⚠️ 常见错误

### ❌ 错误做法
- 复制到"命令窗口" → **Colab 没有这个功能**
- 复制到文本单元格 → **有字数限制**
- 使用笔记本的文件上传 → **不必要**

### ✅ 正确做法
**直接在代码单元格粘贴** → **无字数限制！**

---

## 🎯 正确操作步骤（3分钟）

### 1️⃣ 访问 Google Colab
```
https://colab.research.google.com
```

### 2️⃣ 创建新笔记本
点击 `文件` → `新建笔记本`

### 3️⃣ 添加标题（可选）
- 点击 `+ 文本`（添加 Markdown 单元格）
- 输入标题：

```markdown
# 隐语 PSI 演示
运行方式：点击代码单元格左侧的 ▶️ 按钮
```

### 4️⃣ 添加代码单元格（重点！）
- **点击 `+ 代码`** （不是文本！）
- 你会看到一个灰色的代码框

### 5️⃣ 复制粘贴代码
在你的电脑上：
1. 打开文件：`/Users/tailunyu/Desktop/sf/secretflow-demo/colab-psi-demo.py`
2. 全选（Cmd+A）
3. 复制（Cmd+C）

在 Colab 的**代码单元格**中：
4. 点击代码框
5. 粘贴（Cmd+V）

**代码单元格可以粘贴任意长度的代码！**

### 6️⃣ 运行代码
- 点击代码单元格左侧的 **▶️ 播放按钮**
- 等待几秒，查看输出

### 7️⃣ 获取分享链接
1. 点击右上角 `共享` 按钮
2. 设置为 `知道此链接的任何人都可以查看`
3. 点击 `复制链接`

---

## 🎨 Colab 界面说明

```
┌─────────────────────────────────────────┐
│  Google Colab                    [共享] │
├─────────────────────────────────────────┤
│  [+ 代码]  [+ 文本]                     │  ← 点击这里
├─────────────────────────────────────────┤
│                                          │
│  ┌────────────────────────────────┐     │
│  │ # 这是代码单元格               │     │
│  │ print("Hello")                 │     │  ← 在这里粘贴
│  │                                │     │
│  │                                │     │
│  └────────────────────────────────┘     │
│  [▶️]                                   │  ← 点击运行
│                                          │
└─────────────────────────────────────────┘
```

---

## 🔧 两个版本可选

### 版本1：完整版（推荐）
- 文件：`colab-psi-demo.py`
- 行数：313 行
- 内容：完整演示 + ECDH-PSI 模拟
- 适合：深入学习

### 版本2：精简版（备用）
- 文件：`colab-psi-demo-simple.py`
- 行数：约 90 行
- 内容：核心演示
- 适合：快速测试

**优先使用完整版！** 精简版只是备用。

---

## 📸 操作截图说明

### 步骤1：点击"+ 代码"
你会看到一个按钮写着 `+ 代码` 或 `+ Code`

### 步骤2：代码单元格
出现一个灰色的代码框，里面可以输入代码

### 步骤3：直接粘贴
在代码框里点击，然后 Cmd+V 粘贴

### 步骤4：点击运行
代码框左侧有一个 ▶️ 按钮，点击它

---

## 🆘 故障排查

### 问题1：找不到"+ 代码"按钮
**解决**：
- 点击笔记本空白处
- 按钮会出现在页面顶部或单元格之间

### 问题2：粘贴后显示不全
**解决**：
- 这是正常的，Colab 会折叠长代码
- 点击运行按钮就可以了

### 问题3：运行失败
**解决**：
- 确保复制的是完整代码（从头到尾）
- 检查代码框里没有多余的字符

---

## ✅ 成功标志

运行成功后，你会看到类似输出：

```
============================================================
隐语PSI隐私求交演示 - Google Colab 版
============================================================

--- 1. 简化版 PSI 演示 (哈希 + 集合求交) ---

--- 医院A (简化版) ---
加载了数据: [1001, 1002, 1003, 1005, 1007]

--- 医院B (简化版) ---
加载了数据: [1002, 1003, 1004, 1006, 1008]

✅ 简化版 PSI 计算完成！
   共同患者 ID (明文交集): [1002, 1003]
   共同患者数量: 2
```

---

## 🎯 完成后记得

1. **保存笔记本**：`文件` → `保存`
2. **重命名**：点击顶部 "Untitled.ipynb" → 改为 "隐语PSI演示"
3. **获取链接**：`共享` → `复制链接`
4. **更新网站**：把链接填入 `docs/tech/README.md`

---

## ⏰ 总时间

- 创建笔记本：1 分钟
- 粘贴代码：30 秒
- 运行测试：30 秒
- 获取链接：1 分钟
- **总计：3 分钟**

---

**记住**：
- ✅ 使用**代码单元格**（+ 代码）
- ❌ 不要用文本单元格（+ 文本）
- ✅ 代码单元格**无字数限制**

**现在试试吧！** 🚀

